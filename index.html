<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Form Appraisal Mobil</title>
  <style>
    body { font-family: sans-serif; padding: 20px; max-width: 600px; margin: auto; }
    label, select, input, button { display: block; margin: 10px 0; width: 100%; }
    .result { margin-top: 20px; padding: 10px; background: #f3f3f3; }
  </style>
</head>
<body>
  <h2>Form Appraisal Mobil Bekas Toyota</h2>

  <label for="model">Pilih Model Mobil:</label>
  <select id="model">
    <option value="">-- Pilih Model --</option>
    <option value="Avanza">Avanza</option>
    <option value="Rush">Rush</option>
    <option value="Innova">Innova</option>
    <option value="Fortuner">Fortuner</option>
    <option value="Calya">Calya</option>
    <option value="Agya">Agya</option>
    <option value="Veloz">Veloz</option>
    <option value="Yaris">Yaris</option>
    <option value="Sienta">Sienta</option>
  </select>

  <label for="type">Tipe Mobil:</label>
  <select id="type">
    <option value="">-- Pilih Tipe --</option>
    <option value="G">G</option>
    <option value="E">E</option>
    <option value="V">V</option>
    <option value="Q">Q</option>
    <option value="TRD">TRD</option>
    <option value="GR">GR</option>
  </select>

  <label for="transmission">Transmisi:</label>
  <select id="transmission">
    <option value="">-- Pilih Transmisi --</option>
    <option value="MT">Manual (MT)</option>
    <option value="AT">Automatic (AT)</option>
    <option value="CVT">CVT</option>
  </select>

  <label for="year">Tahun Kendaraan:</label>
  <select id="year">
    <option value="">-- Pilih Tahun --</option>
    <option value="2018">2018</option>
    <option value="2019">2019</option>
    <option value="2020">2020</option>
    <option value="2021">2021</option>
    <option value="2022">2022</option>
  </select>

  <label for="condition">Kondisi Umum (1 = Buruk, 5 = Sangat Baik):</label>
  <input type="number" id="condition" min="1" max="5">

  <label for="km">Kilometer Kendaraan (dalam ribuan):</label>
  <input type="number" id="km" min="0">

  <button onclick="calculateAppraisal()">Hitung Appraisal</button>

  <div id="result" class="result"></div>

  <script>
    const priceData = {
      "Avanza": {"2018": 155000000, "2019": 165000000, "2020": 175000000, "2021": 185000000, "2022": 195000000},
      "Rush": {"2018": 205000000, "2019": 215000000, "2020": 225000000, "2021": 235000000, "2022": 245000000},
      "Innova": {"2018": 275000000, "2019": 285000000, "2020": 295000000, "2021": 305000000, "2022": 315000000},
      "Fortuner": {"2018": 405000000, "2019": 415000000, "2020": 425000000, "2021": 435000000, "2022": 445000000},
      "Calya": {"2018": 125000000, "2019": 130000000, "2020": 135000000, "2021": 140000000, "2022": 145000000},
      "Agya": {"2018": 115000000, "2019": 120000000, "2020": 125000000, "2021": 130000000, "2022": 135000000},
      "Veloz": {"2020": 185000000, "2021": 195000000, "2022": 205000000},
      "Yaris": {"2018": 215000000, "2019": 225000000, "2020": 235000000, "2021": 245000000, "2022": 255000000},
      "Sienta": {"2018": 195000000, "2019": 205000000, "2020": 215000000, "2021": 225000000, "2022": 235000000},
    };

    function calculateAppraisal() {
      const model = document.getElementById('model').value;
      const year = document.getElementById('year').value;
      const type = document.getElementById('type').value;
      const transmission = document.getElementById('transmission').value;
      const condition = parseFloat(document.getElementById('condition').value);
      const km = parseFloat(document.getElementById('km').value);

      const basePrice = priceData[model]?.[year];
      if (!basePrice) {
        document.getElementById('result').innerText = 'Harga dasar tidak ditemukan.';
        return;
      }

      // Faktor koreksi
      const conditionFactor = condition / 5; // dari 0.2 - 1.0
      const kmFactor = km > 100 ? 0.85 : (km > 50 ? 0.95 : 1.0);
      const typeFactor = (type === 'Q' || type === 'GR') ? 1.05 : (type === 'G' ? 1.00 : 0.95);
      const transFactor = (transmission === 'AT' || transmission === 'CVT') ? 1.03 : 1.00;

      const finalPrice = Math.round(basePrice * conditionFactor * kmFactor * typeFactor * transFactor);

      document.getElementById('result').innerHTML = `
        <strong>Harga Pasar:</strong> Rp ${basePrice.toLocaleString('id-ID')}<br>
        <strong>Model:</strong> ${model} ${type} (${transmission})<br>
        <strong>Skor Kondisi:</strong> ${condition}<br>
        <strong>KM:</strong> ${km} ribu km<br>
        <strong>Appraisal:</strong> <b>Rp ${finalPrice.toLocaleString('id-ID')}</b>
      `;
    }
  </script>
</body>
</html>
